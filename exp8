-- CREATE DEPARTMENT TABLE
CREATE TABLE DEPARTMENT (
    DeptID INT PRIMARY KEY,
    DeptName VARCHAR(50)
);

-- ADD DeptID to FACULTY TABLE
ALTER TABLE FACULTY ADD DeptID INT;
ALTER TABLE FACULTY ADD FOREIGN KEY (DeptID) REFERENCES DEPARTMENT(DeptID);

-- ADD FacultyID to COURSE TABLE
ALTER TABLE COURSE ADD FacultyID INT;
ALTER TABLE COURSE ADD FOREIGN KEY (FacultyID) REFERENCES FACULTY(FacultyID);

-- INSERT INTO DEPARTMENT
INSERT INTO DEPARTMENT VALUES 
(1, 'ECE'),
(2, 'CSE'),
(3, 'MECH');

-- UPDATE FACULTY WITH DEPARTMENT
UPDATE FACULTY SET DeptID = 1 WHERE FacultyName = 'Dr. Smith';
UPDATE FACULTY SET DeptID = 1 WHERE FacultyName = 'Dr. Jones';
UPDATE FACULTY SET DeptID = 2 WHERE FacultyName = 'Dr. Ray';

-- UPDATE COURSE WITH FACULTY
UPDATE COURSE SET FacultyID = 1 WHERE CourseNo = 'C001';
UPDATE COURSE SET FacultyID = 2 WHERE CourseNo = 'C002';
UPDATE COURSE SET FacultyID = 3 WHERE CourseNo = 'C003';
UPDATE COURSE SET FacultyID = 1 WHERE CourseNo = 'C004';

-- Q1: Departments where faculty members are working
SELECT DISTINCT D.DeptName
FROM DEPARTMENT D
RIGHT JOIN FACULTY F ON D.DeptID = F.DeptID;

-- Q2: Students with no score in any courses
SELECT S.Name, A.CourseNo
FROM STUDENT S
RIGHT JOIN ASSESSMENT A ON S.RegNo = A.RegNo
WHERE A.Mark IS NULL;

-- Q3: Courses taken by 'ECE' department faculty named 'Kamal'
-- Add dummy faculty Kamal for query purpose
INSERT INTO FACULTY VALUES (4, 'Kamal', '1985-09-15', '2024-01-01', 1);
UPDATE COURSE SET FacultyID = 4 WHERE CourseNo = 'C002';

SELECT C.CourseName
FROM COURSE C
INNER JOIN FACULTY F ON C.FacultyID = F.FacultyID
INNER JOIN DEPARTMENT D ON F.DeptID = D.DeptID
WHERE F.FacultyName = 'Kamal' AND D.DeptName = 'ECE';
